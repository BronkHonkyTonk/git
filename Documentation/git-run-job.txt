git-run-job(1)
==============

NAME
----
git-run-job - Run a maintenance job. Intended for background operation.


SYNOPSIS
--------
[verse]
'git run-job commit-graph'


DESCRIPTION
-----------

Run a maintenance job on the current repository. This is available as a
command for a few reasons. First, the background job feature can launch
these commands on a schedule and each process will completely clear its
memory when complete. Second, an expert user could create their own job
schedule by running these jobs themselves.

THIS COMMAND IS EXPERIMENTAL. THE SET OF AVAILABLE JOBS OR THEIR EXACT
BEHAVIOR MAY BE ALTERED IN THE FUTURE.


JOBS
----

'commit-graph'::

The `commit-graph` job updates the `commit-graph` files incrementally,
then verifies that the written data is correct. If the new layer has an
issue, then the chain file is removed and the `commit-graph` is
rewritten from scratch.
+
The verification only checks the top layer of the `commit-graph` chain.
If the incremental write merged the new commits with at least one
existing layer, then there is potential for on-disk corruption being
carried forward into the new file. This will be noticed and the new
commit-graph file will be clean as Git reparses the commit data from
the object database.
+
The incremental write is safe to run alongside concurrent Git processes
since it will not expire `.graph` files that were in the previous
`commit-graph-chain` file. They will be deleted by a later run based on
the expiration delay.


GIT
---
Part of the linkgit:git[1] suite
